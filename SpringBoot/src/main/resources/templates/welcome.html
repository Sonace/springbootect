<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head
 th:include="include/banner :: banner"> 
<meta charset="UTF-8" />
<meta id="_csrf" name="_csrf" th:content="${_csrf.token}"/>
<meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}"/>
<title>Index Page</title>

</head>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<script  th:inline="javascript">
		
		
		
		$(document).ready(function() {
			
			 var del = [];
			 
			 $('#delrow').click(function() {
					
				 $("#accounttable input:checkbox").each(function(){
		                if (this.checked) {
		                	
		                	 del.push($(this).val());
		                	
		                	$(this).closest('tr').remove();
		                }
		               

		            })
				    
				});
			 
			 
			 $('#submit').click(function() {
				 var token = $('#_csrf').attr('content');
				 var header = $('#_csrf_header').attr('content');
				 
				   $.ajax({
				        
				        type: "POST",
				        data:  {IdDel : del},
				        url: "/submit",
				        beforeSend: function(xhr) {
                            xhr.setRequestHeader(header, token);
                        },
				        success: function(data) {
				            console.log('done');
				        },
				        error: function(jqXHR, textStatus, errorThrown) {
				            console.log('error while post');
				        }

				    });
				 
				});
			 
			 
			 
			
			 
			 
			 
			
			 
			 
		});
		
		
		</script>
<body>


	<div>
	<div>
		 <a th:href="@{/henho(sortt='userNameDesc')}"><button>Add new</button></a>
		 <a th:href="@{/edit}"><button >Edit</button></a>
		 <button id="delrow">Delete</button>
	</div>
		
		<table border="1" id="accounttable">
		
			<tr>
				<th>Checkbox</th>
				<th><a th:href="@{/henho(column='userName',sortt=${sortt})}"><button>Username</button></a></th>
				<th><a th:href="@{/henho(column='email',sortt=${sortt})}"><button>Email</button></a></th>
				<th><a th:href="@{/henho(column='phone',sortt=${sortt})}"><button>Phone number</button></a></th>
				<th><a th:href="@{/henho(column='dob',sortt=${sortt})}"><button>Birth day</button></a></th>
				<th><a th:href="@{/henho(column='amount',sortt=${sortt})}"><button>Amount</button></a></th>
				<th>Số dư</th>
			</tr>
			<form action="#" method="post">
			<th:block th:each="user : ${userData}">

				<tr>
					<td><input type="checkbox" th:value="${user.user_id}" readonly="readonly"  /></td>
					<td><input type="text" th:value="${user.user_name}" readonly="readonly"/></td>
					<td><input type="text" th:value="${user.address.email}" readonly="readonly"/></td>
					<td><input type="text" th:value="${user.address.phone_number}" readonly="readonly"/></td>
					<td><input type="text" th:value="${user.bod}" readonly="readonly"/></td>
					<td><input type="text" th:value="${user.account.amount}" readonly="readonly"/></td>
				</tr>
			</th:block>
		</table>
			<input type="submit" id="submit" value="submit"></input>
			 <input type="reset" value="reset"/>
		</form>
	
	</div>

	<div th:replace="include/footer :: footer"></div>
	
	
	
			

		
</script>


</body>


</html>